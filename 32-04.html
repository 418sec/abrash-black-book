<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="vsisbn" content="1576101746" />
  <meta name="vstitle" content="Michael Abrash's Graphics Programming Black Book, Special Edition" />
  <meta name="vsauthor" content="Michael Abrash" />
  <meta name="vspublisher" content="The Coriolis Group" />
  <meta name="vspubdate" content="07/01/97" />
  <meta name="vscategory" content="Web and Software Development: Game Development,Web and Software Development: Graphics and Multimedia Development" />

  <title>Michael Abrash's Graphics Programming Black Book Special Edition: Be It Resolved: 360x480</title>
  <meta name="chapter" content="32" />
  <meta name="pages" content="618-620" />
</head>

<body>
  <center>
    <table border="1">
      <tr>
        <td><a href="32-03.html">Previous</a></td>

        <td><a href="index.html">Table of Contents</a></td>

        <td><a href="32-05.html">Next</a></td>
      </tr>
    </table>
  </center>

  <p><br /></p>

  <p>The second thing you&rsquo;ll notice is that exquisite shading effects are possible in 360x480 256-color mode; adjacent lines blend together remarkably smoothly, even with the default palette. The VGA allows you to select your 256 colors from a palette of 256K, so you could, if you wished, set up the colors to produce still finer shading albeit with fewer distinctly different colors available. For more on this and related topics, see the coverage of palette reprogramming that begins in the next chapter.</p>

  <p>The one thing you may not notice right away is just how much detail is visible on the screen, because the blending of colors tends to obscure the superior resolution of this mode. Each of the four rectangles displayed measures 180 pixels horizontally by 240 vertically. Put another way, each <i>one</i> of those rectangles has two-thirds as many pixels as the entire mode 13H screen; in all, 360x480 256-color mode has 2.7 times as many pixels as mode 13H! As mentioned above, the resolution is unevenly distributed, with vertical resolution matching that of mode 12H but horizontal resolution barely exceeding that of mode 13H&mdash;but resolution is hot stuff, no matter how it&rsquo;s laid out, and 360x480 256-color mode has the highest 256-color resolution you&rsquo;re ever likely to see on a standard VGA. (SuperVGAs are quite another matter&mdash;but when you <i>require</i> a SuperVGA you&rsquo;re automatically excluding what might be a significant chunk of the market for your code.)</p>

  <p>Now that we&rsquo;ve seen the wonders of which our new mode is capable, let&rsquo;s take the time to understand how it works.</p>

  <h3 id="Heading5">How 360x480 256-Color Mode Works</h3>

  <p>In describing 360x480 256-color mode, I&rsquo;m going to assume that you&rsquo;re familiar with the discussion of 320x400 256-color mode in the last chapter. If not, go back to that chapter and read it; the two modes have a great deal in common, and I&rsquo;m not going to bore you by repeating myself when the goods are just a few page flips (the paper kind) away.</p>

  <p>360x480 256-color mode is essentially 320x400 256-color mode, but stretched in both dimensions. Let&rsquo;s look at the vertical stretching first, since that&rsquo;s the simpler of the two.</p>

  <h4 align="left" id="Heading6">480 Scan Lines per Screen: A Little Slower, But No Big Deal</h4>

  <p>There&rsquo;s nothing unusual about 480 scan lines; standard modes 11H and 12H support that vertical resolution. The number of scan lines has nothing to do with either the number of colors or the horizontal resolution, so converting 320x400 256mode to 320x480 256-color mode is a simple matter of reprogramming the VGA&rsquo;s vertical control registers&mdash;which control the scan lines displayed, the vertical sync pulse, vertical blanking, and the total number of scan lines&mdash;to the 480-scansettings, and setting the polarities of the horizontal and vertical sync pulses to tell the monitor to adjust to a 480-line screen.</p>

  <p>Switching to 480 scan lines has the effect of slowing the screen refresh rate. The VGA always displays at 70 Hz <i>except</i> in 480-scan-line modes; there, due to the time required to scan the extra lines, the refresh rate slows to 60 Hz. (VGA monitors always scan at the same rate horizontally; that is, the distance across the screen covered by the electron beam in a given period of time is the same in all modes. Consequently, adding extra lines per frame requires extra time.) 60 Hz isn&rsquo;t <i>bad</i>&mdash;that&rsquo;s the only refresh rate the EGA ever supported, and the EGA was the industry standard in its time&mdash;but it does tend to flicker a little more and so is a little harder on the eyes than 70 Hz.</p>

  <h4 align="left" id="Heading7">360 Pixels per Scan Line: No Mean Feat</h4>

  <p>Converting from 320 to 360 pixels per scan line is more difficult than converting from 400 to 480 scan lines per screen. None of the VGA&rsquo;s graphics modes supports 360 pixels across the screen, or anything like it; the standard choices are 320 and 640 pixels across. However, the VGA <i>does</i> support the horizontal resolution we seek&mdash;360 pixels&mdash;in 40-column <i>text</i> mode.</p>

  <p>Unfortunately, the register settings that select those horizontal resolutions aren&rsquo;t directly transferable to graphics mode. Text modes display 9 dots (the width of one character) for each time information is fetched from display memory, while graphics modes display just 4 or 8 dots per display memory fetch. (Although it&rsquo;s a bit confusing, it&rsquo;s standard terminology to refer to the interval required for one display memory fetch as a &ldquo;character,&rdquo; and I&rsquo;ll follow that terminology from now on.) Consequently, both modes display either 40 or 80 characters per scan line; the only difference is that text modes display more pixels per character. Given that graphics modes <i>can&rsquo;t</i> display 9 dots per character (there&rsquo;s only enough information for eight 16pixels or four 256-color pixels in each memory fetch, and that&rsquo;s that), we&rsquo;d seem to be at an impasse.</p>

  <p><br /></p>

  <center>
    <table border="1">
      <tr>
        <td><a href="32-03.html">Previous</a></td>

        <td><a href="index.html">Table of Contents</a></td>

        <td><a href="32-05.html">Next</a></td>
      </tr>
    </table>
  </center>
  <hr width="90%" size="1" noshade="noshade" />

  <div align="center">
    Graphics Programming Black Book &copy; 2001 Michael Abrash
  </div>
</body>
</html>
