<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="vsisbn" content="1576101746" />
  <meta name="vstitle" content="Michael Abrash's Graphics Programming Black Book, Special Edition" />
  <meta name="vsauthor" content="Michael Abrash" />
  <meta name="vspublisher" content="The Coriolis Group" />
  <meta name="vspubdate" content="07/01/97" />
  <meta name="vscategory" content="Web and Software Development: Game Development,Web and Software Development: Graphics and Multimedia Development" />

  <title>Michael Abrash's Graphics Programming Black Book Special Edition: Video Est Omnis Divisa</title><!-- HEADER -->
  <!-- Empty Reference Subhead -->
  <!--ISBN=1576101746//-->
  <!--TITLE=Michael Abrash's Graphics Programming Black Book Special Edition//-->
  <!--AUTHOR=Michael Abrash//-->
  <!--PUBLISHER=The Coriolis Group, Inc.//-->
  <!--CHAPTER=30//-->
  <!--PAGES=574-575//-->
  <!--UNASSIGNED1//-->
  <!--UNASSIGNED2//-->
</head>

<body>
  <center>
    <table border="1">
      <tr>
        <td><a href="30-03.html">Previous</a></td>

        <td><a href="index.html">Table of Contents</a></td>

        <td><a href="30-05.html">Next</a></td>
      </tr>
    </table>
  </center>

  <p><br /></p>

  <h3><a id="Heading8"></a>Split Screen and Panning</h3>

  <p>Back in Chapter 23, I presented a program that performed smooth horizontal panning. Smooth horizontal panning consists of two parts: byte-by-byte (8-pixel) panning by changing the start address and pixel-by-pixel intrabyte panning by setting the Pel Panning register (AC register 13H) to adjust alignment by 0 to 7 pixels. (IBM prefers its own jargon and uses the word &ldquo;pel&rdquo; instead of &ldquo;pixel&rdquo; in much of their documentation, hence &ldquo;pel panning.&rdquo; Then there&rsquo;s DASD, a.k.a. Direct Access Storage Device&mdash;IBM-speak for hard disk.)</p>

  <p>Horizontal smooth panning works just fine, although I&rsquo;ve always harbored some doubts that any one horizontal-smooth-panning approach works properly on all display board clones. (More on this later.) There&rsquo;s a catch when using horizontal smooth panning with the split screen up, though, and it&rsquo;s a serious catch: You can&rsquo;t byte-pan the split screen (which always starts at offset zero, no matter what the setting of the start address registers)&mdash;but you <i>can</i> pel-pan the split screen.</p>

  <p>Put another way, when the normal portion of the screen is horizontally smooth-panned, the split screen portion moves a pixel at a time until it&rsquo;s time to move to the next byte, then jumps back to the start of the current byte. As the top part of the screen moves smoothly about, the split screen will move and jump, move and jump, over and over. Believe me, it&rsquo;s not a pretty sight.</p>

  <table width="100%">
    <tr>
      <td align="left" valign="top" width="5%"><img src="images/i.jpg" /></td>

      <td align="left" valign="top" width="95%"><small><i>What&rsquo;s to be done? On the EGA, nothing. Unless you&rsquo;re willing to have your users&rsquo; eyes doing the jitterbug, don&rsquo;t use horizontal smooth scrolling while the split screen is up. Byte panning is fine&mdash;just don&rsquo;t change the Pel Panning register from its default setting.</i></small></td>
    </tr>
  </table>

  <p>On the VGA, there is recourse. A VGA-only bit, bit 5 of the AC Mode Control register (AC register 10H), turns off pel panning in the split screen. In other words, when this bit is set to 1, pel panning is reset to zero before the first line of the split screen, and remains zero until the end of the frame. This doesn&rsquo;t allow you to pan the split screen horizontally, mind you&mdash;there&rsquo;s no way to do that&mdash;but it does let you pan the normal screen while the split screen stays rock-solid. This can be used to produce an attractive &ldquo;streaming tape&rdquo; effect in the normal screen while the split screen is used to display non-moving information.</p>

  <h4 align="left"><a id="Heading9"></a>The Split Screen and Horizontal Panning: An Example</h4>

  <p>Listing 30.2 illustrates the interaction of horizontal smooth panning with the split screen, as well as the suppression of pel panning in the split screen. Listing 30.2 creates a virtual screen 1024 pixels across by setting the Offset register (CRTC register 13H) to 64, sets the normal screen to scan video data beginning far enough up in display memory to leave room for the split screen starting at offset zero, turns on the split screen, and fills in the normal screen and split screen with distinctive patterns. Next, Listing 30.2 pans the normal screen horizontally without setting bit 5 of the AC Mode Control register to 1. As you&rsquo;d expect, the split screen jerks about quite horribly. After a key press, Listing 30.2 sets bit 5 of the Mode Control register and pans the normal screen again. This time, the split screen doesn&rsquo;t budge an inch&mdash;<i>if</i> the code is running on a VGA.</p>

  <p>By the way, if <b>IS_VGA</b> is set to 0 in Listing 30.2, the program will assemble in a form that will run on the EGA and <i>only</i> the EGA. Pel panning suppression in the split screen won&rsquo;t work in this version, however, because the EGA lacks the capability to support that feature. When the EGA version runs, the split screen simply jerks back and forth during both panning sessions.</p>

  <p><br /></p>

  <center>
    <table border="1">
      <tr>
        <td><a href="30-03.html">Previous</a></td>

        <td><a href="index.html">Table of Contents</a></td>

        <td><a href="30-05.html">Next</a></td>
      </tr>
    </table>
  </center>
  <hr width="90%" size="1" noshade="noshade" />

  <div align="center">
    Graphics Programming Black Book &copy; 2001 Michael Abrash
  </div><!-- all of the reference materials (books) have the footer and subfoot reveresed -->
  <!-- reference_subfoot = footer -->
  <!-- reference_footer = subfoot -->
  <!-- BEGIN SUB FOOTER -->
  <!-- END FOOTER -->
</body>
</html>
